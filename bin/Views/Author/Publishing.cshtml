@{
    ViewData["Title"] = "Publishing Workflow - Author Dashboard";
    Layout = "~/Views/Shared/_AuthorLayout.cshtml";

}

<div class="publishing-workflow">
    <!-- Header Section -->
    <div class="page-header" data-aos="fade-down">
        <div class="header-content">
            <h1><i class="fas fa-upload"></i> Publishing Workflow</h1>
            <p>Track and manage your book publishing process</p>
        </div>
        
        <div class="header-actions">
            <button class="btn btn-primary" onclick="submitNewBook()" data-aos="fade-left" data-aos-delay="200">
                <i class="fas fa-plus"></i>
                Submit New Book
            </button>
        </div>
    </div>

    <!-- Publishing Stats -->
    <div class="publishing-stats" data-aos="fade-up" data-aos-delay="100">
        <div class="stat-card" data-aos="flip-left" data-aos-delay="200">
            <div class="stat-icon">
                <i class="fas fa-book"></i>
            </div>
            <div class="stat-info">
                <h3>12</h3>
                <p>Total Books</p>
            </div>
        </div>
        
        <div class="stat-card" data-aos="flip-left" data-aos-delay="300">
            <div class="stat-icon">
                <i class="fas fa-paper-plane"></i>
            </div>
            <div class="stat-info">
                <h3>3</h3>
                <p>In Review</p>
            </div>
        </div>
        
        <div class="stat-card" data-aos="flip-left" data-aos-delay="400">
            <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h3>8</h3>
                <p>Published</p>
            </div>
        </div>
        
        <div class="stat-card" data-aos="flip-left" data-aos-delay="500">
            <div class="stat-icon">
                <i class="fas fa-history"></i>
            </div>
            <div class="stat-info">
                <h3>1</h3>
                <p>Pending Revisions</p>
            </div>
        </div>
    </div>

    <!-- Workflow Tabs -->
    <div class="workflow-tabs" data-aos="fade-up" data-aos-delay="200">
        <ul class="nav nav-tabs" id="publishingTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="in-progress-tab" data-bs-toggle="tab" data-bs-target="#in-progress" type="button" role="tab">
                    <i class="fas fa-sync-alt"></i> In Progress
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="completed-tab" data-bs-toggle="tab" data-bs-target="#completed" type="button" role="tab">
                    <i class="fas fa-check"></i> Completed
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="rejected-tab" data-bs-toggle="tab" data-bs-target="#rejected" type="button" role="tab">
                    <i class="fas fa-times"></i> Rejected
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="publishingTabContent">
            <!-- In Progress Tab -->
            <div class="tab-pane fade show active" id="in-progress" role="tabpanel">
                <div class="workflow-grid" data-aos="fade-up" data-aos-delay="300">
                    <!-- Book 1 - In Review -->
                    <div class="workflow-card" data-aos="zoom-in" data-aos-delay="400">
                        <div class="card-header">
                            <div class="book-cover">
                                <div class="default-cover">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div class="book-info">
                                <h3>The Silent Witness</h3>
                                <p class="book-genre">Mystery Thriller</p>
                                <span class="status-badge review">In Review</span>
                            </div>
                        </div>
                        
                        <div class="card-body">
                            <div class="progress-section">
                                <h4>Publishing Progress</h4>
                                <div class="progress-steps">
                                    <div class="step completed">
                                        <div class="step-icon">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="step-label">Submission</div>
                                    </div>
                                    
                                    <div class="step completed">
                                        <div class="step-icon">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="step-label">Editor Review</div>
                                    </div>
                                    
                                    <div class="step active">
                                        <div class="step-icon">
                                            <i class="fas fa-sync"></i>
                                        </div>
                                        <div class="step-label">Proofreading</div>
                                    </div>
                                    
                                    <div class="step">
                                        <div class="step-icon">
                                            <i class="fas fa-cog"></i>
                                        </div>
                                        <div class="step-label">Formatting</div>
                                    </div>
                                    
                                    <div class="step">
                                        <div class="step-icon">
                                            <i class="fas fa-upload"></i>
                                        </div>
                                        <div class="step-label">Publish</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="timeline-section">
                                <h4>Recent Activity</h4>
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <div class="timeline-icon">
                                            <i class="fas fa-paper-plane"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <p><strong>Submitted for review</strong></p>
                                            <small>May 15, 2023 at 10:30 AM</small>
                                        </div>
                                    </div>
                                    
                                    <div class="timeline-item">
                                        <div class="timeline-icon">
                                            <i class="fas fa-user-check"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <p><strong>Editor assigned</strong></p>
                                            <small>May 16, 2023 at 9:15 AM</small>
                                        </div>
                                    </div>
                                    
                                    <div class="timeline-item">
                                        <div class="timeline-icon">
                                            <i class="fas fa-comments"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <p><strong>Editor feedback received</strong></p>
                                            <small>May 20, 2023 at 2:45 PM</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <button class="btn btn-outline-primary" onclick="viewFeedback(1)">
                                <i class="fas fa-comments"></i>
                                View Feedback
                            </button>
                            <button class="btn btn-primary" onclick="submitRevisions(1)">
                                <i class="fas fa-paper-plane"></i>
                                Submit Revisions
                            </button>
                        </div>
                    </div>
                    
                    <!-- Book 2 - Pending Revisions -->
                    <div class="workflow-card" data-aos="zoom-in" data-aos-delay="500">
                        <div class="card-header">
                            <div class="book-cover">
                                <div class="default-cover">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div class="book-info">
                                <h3>Love in the City</h3>
                                <p class="book-genre">Romance</p>
                                <span class="status-badge pending">Pending Revisions</span>
                            </div>
                        </div>
                        
                        <div class="card-body">
                            <div class="progress-section">
                                <h4>Publishing Progress</h4>
                                <div class="progress-steps">
                                    <div class="step completed">
                                        <div class="step-icon">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="step-label">Submission</div>
                                    </div>
                                    
                                    <div class="step completed">
                                        <div class="step-icon">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="step-label">Editor Review</div>
                                    </div>
                                    
                                    <div class="step active">
                                        <div class="step-icon">
                                            <i class="fas fa-exclamation-circle"></i>
                                        </div>
                                        <div class="step-label">Revisions Needed</div>
                                    </div>
                                    
                                    <div class="step">
                                        <div class="step-icon">
                                            <i class="fas fa-cog"></i>
                                        </div>
                                        <div class="step-label">Resubmission</div>
                                    </div>
                                    
                                    <div class="step">
                                        <div class="step-icon">
                                            <i class="fas fa-upload"></i>
                                        </div>
                                        <div class="step-label">Publish</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feedback-section">
                                <h4>Editor Feedback</h4>
                                <div class="feedback-content">
                                    <p><strong>Chapter 3 needs revision:</strong></p>
                                    <ul>
                                        <li>Character development needs more depth</li>
                                        <li>Dialogue feels unnatural in places</li>
                                        <li>Plot hole in scene between pages 45-47</li>
                                    </ul>
                                    <p><strong>Formatting issues:</strong></p>
                                    <ul>
                                        <li>Inconsistent spacing</li>
                                        <li>Missing chapter breaks</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <button class="btn btn-outline-secondary" onclick="requestExtension(2)">
                                <i class="fas fa-clock"></i>
                                Request Extension
                            </button>
                            <button class="btn btn-primary" onclick="submitRevisions(2)">
                                <i class="fas fa-paper-plane"></i>
                                Submit Revisions
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Completed Tab -->
            <div class="tab-pane fade" id="completed" role="tabpanel">
                <div class="completed-grid" data-aos="fade-up" data-aos-delay="300">
                    <!-- Published Book 1 -->
                    <div class="completed-card" data-aos="zoom-in" data-aos-delay="400">
                        <div class="card-header">
                            <div class="book-cover">
                                <div class="default-cover">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div class="book-info">
                                <h3>The Dragon's Quest</h3>
                                <p class="book-genre">Fantasy</p>
                                <span class="status-badge published">Published</span>
                            </div>
                        </div>
                        
                        <div class="card-body">
                            <div class="publish-details">
                                <div class="detail-item">
                                    <span class="label">Published Date:</span>
                                    <span class="value">March 22, 2023</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Platforms:</span>
                                    <span class="value">Amazon, Apple Books, Kobo</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Sales:</span>
                                    <span class="value">1,247 copies</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Earnings:</span>
                                    <span class="value">$2,847.50</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <button class="btn btn-outline-primary" onclick="viewAnalytics(1)">
                                <i class="fas fa-chart-bar"></i>
                                View Analytics
                            </button>
                            <button class="btn btn-primary" onclick="updateBook(1)">
                                <i class="fas fa-edit"></i>
                                Update Book
                            </button>
                        </div>
                    </div>
                    
                    <!-- Published Book 2 -->
                    <div class="completed-card" data-aos="zoom-in" data-aos-delay="500">
                        <div class="card-header">
                            <div class="book-cover">
                                <div class="default-cover">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div class="book-info">
                                <h3>Midnight Mysteries</h3>
                                <p class="book-genre">Mystery</p>
                                <span class="status-badge published">Published</span>
                            </div>
                        </div>
                        
                        <div class="card-body">
                            <div class="publish-details">
                                <div class="detail-item">
                                    <span class="label">Published Date:</span>
                                    <span class="value">January 15, 2023</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Platforms:</span>
                                    <span class="value">Amazon, Google Play</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Sales:</span>
                                    <span class="value">892 copies</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Earnings:</span>
                                    <span class="value">$1,984.20</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <button class="btn btn-outline-primary" onclick="viewAnalytics(2)">
                                <i class="fas fa-chart-bar"></i>
                                View Analytics
                            </button>
                            <button class="btn btn-primary" onclick="updateBook(2)">
                                <i class="fas fa-edit"></i>
                                Update Book
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Rejected Tab -->
            <div class="tab-pane fade" id="rejected" role="tabpanel">
                <div class="rejected-content" data-aos="fade-up" data-aos-delay="300">
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>No Rejected Books</h3>
                        <p>All your submissions have been approved or are pending review.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Submit Book Modal -->
<div class="modal fade" id="submitBookModal" tabindex="-1" aria-labelledby="submitBookModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="submitBookModalLabel">Submit Book for Publishing</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="bookSelect" class="form-label">Select Book</label>
                        <select class="form-control" id="bookSelect">
                            <option value="">Choose a book to submit</option>
                            <option value="1">The Silent Witness</option>
                            <option value="2">Love in the City</option>
                            <option value="3">Midnight Mysteries</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="submissionNotes" class="form-label">Submission Notes</label>
                        <textarea class="form-control" id="submissionNotes" rows="4" placeholder="Add any notes for the editor..."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Submission Checklist</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="check1">
                            <label class="form-check-label" for="check1">
                                Book is complete and ready for review
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="check2">
                            <label class="form-check-label" for="check2">
                                All chapters have been proofread
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="check3">
                            <label class="form-check-label" for="check3">
                                Cover image is included
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="check4">
                            <label class="form-check-label" for="check4">
                                Metadata is complete
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="submitBookForReview()">Submit for Review</button>
            </div>
        </div>
    </div>
</div>

<style>
    .publishing-workflow {
        padding: 20px;
    }

    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding: 20px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
        backdrop-filter: blur(20px);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .header-content h1 {
        margin: 0;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 2rem;
        font-weight: 700;
    }

    .header-content p {
        margin: 5px 0 0;
        color: #666;
        font-size: 1rem;
    }

    /* Publishing Stats */
    .publishing-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
        backdrop-filter: blur(20px);
        padding: 25px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        gap: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15);
    }

    .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
    }

    .stat-info h3 {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 5px;
        color: #333;
    }

    .stat-info p {
        color: #666;
        margin: 0;
        font-size: 0.95rem;
    }

    /* Workflow Tabs */
    .workflow-tabs {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        overflow: hidden;
    }

    .nav-tabs {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .nav-tabs .nav-link {
        border: none;
        padding: 15px 25px;
        color: #666;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .nav-tabs .nav-link:hover {
        color: #667eea;
        background: rgba(102, 126, 234, 0.05);
    }

    .nav-tabs .nav-link.active {
        color: #667eea;
        background: rgba(102, 126, 234, 0.1);
        border-bottom: 3px solid #667eea;
    }

    .nav-tabs .nav-link i {
        margin-right: 8px;
    }

    /* Workflow Grid */
    .workflow-grid, .completed-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        gap: 25px;
        padding: 25px;
    }

    .workflow-card, .completed-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .workflow-card:hover, .completed-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15);
    }

    .card-header {
        display: flex;
        gap: 20px;
        padding: 20px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .book-cover {
        width: 80px;
        height: 100px;
    }

    .default-cover {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
    }

    .book-info {
        flex: 1;
    }

    .book-info h3 {
        margin: 0 0 5px 0;
        font-size: 1.2rem;
        color: #333;
    }

    .book-genre {
        color: #666;
        font-size: 0.9rem;
        margin: 0 0 10px 0;
    }

    .status-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
    }

    .status-badge.review {
        background: rgba(0, 123, 255, 0.1);
        color: #007bff;
    }

    .status-badge.pending {
        background: rgba(255, 193, 7, 0.1);
        color: #ffc107;
    }

    .status-badge.published {
        background: rgba(40, 167, 69, 0.1);
        color: #28a745;
    }

    .card-body {
        padding: 20px;
    }

    .progress-section h4, .timeline-section h4, .feedback-section h4 {
        margin: 0 0 15px 0;
        font-size: 1rem;
        color: #333;
    }

    .progress-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
        position: relative;
    }

    .step:not(:last-child)::after {
        content: '';
        position: absolute;
        top: 15px;
        left: 50%;
        right: -50%;
        height: 2px;
        background: #e0e0e0;
        z-index: 1;
    }

    .step.completed::after {
        background: #28a745;
    }

    .step-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #e0e0e0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        font-size: 0.8rem;
        margin-bottom: 5px;
        position: relative;
        z-index: 2;
    }

    .step.completed .step-icon {
        background: #28a745;
        color: white;
    }

    .step.active .step-icon {
        background: #667eea;
        color: white;
        animation: pulse 2s infinite;
    }

    .step .step-icon {
        background: #667eea;
        color: white;
    }

    .step-label {
        font-size: 0.7rem;
        text-align: center;
        color: #666;
        max-width: 80px;
    }

    .step.completed .step-label {
        color: #28a745;
    }

    .step.active .step-label {
        color: #667eea;
        font-weight: 600;
    }

    .timeline {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .timeline-item {
        display: flex;
        gap: 15px;
    }

    .timeline-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #667eea;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.8rem;
        flex-shrink: 0;
    }

    .timeline-content p {
        margin: 0 0 5px 0;
        font-size: 0.9rem;
        color: #333;
    }

    .timeline-content small {
        color: #999;
        font-size: 0.8rem;
    }

    .feedback-content {
        background: rgba(255, 193, 7, 0.05);
        border-left: 4px solid #ffc107;
        padding: 15px;
        border-radius: 0 8px 8px 0;
    }

    .feedback-content ul {
        padding-left: 20px;
        margin: 10px 0;
    }

    .feedback-content li {
        margin-bottom: 5px;
        font-size: 0.9rem;
    }

    .card-footer {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        padding: 15px 20px;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        background: rgba(248, 249, 250, 0.5);
    }

    .publish-details {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .detail-item {
        display: flex;
        justify-content: space-between;
    }

    .label {
        font-weight: 500;
        color: #333;
    }

    .value {
        color: #666;
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #666;
    }

    .empty-state i {
        font-size: 3rem;
        margin-bottom: 20px;
        color: #28a745;
    }

    .empty-state h3 {
        margin-bottom: 10px;
        font-size: 1.5rem;
    }

    /* Animations */
    @@keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
        }
        70% {
            box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
        }
    }

    /* Mobile Responsive */
    @@media (max-width: 768px) {
        .page-header {
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }
        
        .workflow-grid, .completed-grid {
            grid-template-columns: 1fr;
            padding: 15px;
        }
        
        .card-header {
            flex-direction: column;
            text-align: center;
        }
        
        .progress-steps {
            flex-direction: column;
            gap: 10px;
        }
        
        .step:not(:last-child)::after {
            display: none;
        }
        
        .card-footer {
            flex-direction: column;
        }
        
        .card-footer .btn {
            width: 100%;
        }
    }
</style>

<script>
    // Submit new book
    function submitNewBook() {
        new bootstrap.Modal(document.getElementById('submitBookModal')).show();
    }

    function submitBookForReview() {
        Swal.fire({
            title: 'Submitting Book',
            text: 'Please wait while we submit your book for review...',
            allowOutsideClick: false,
            showConfirmButton: false,
            didOpen: () => {
                Swal.showLoading();
            }
        });
        
        // Simulate submission process
        setTimeout(() => {
            Swal.fire({
                title: 'Book Submitted!',
                text: 'Your book has been submitted for review successfully.',
                icon: 'success',
                confirmButtonColor: '#667eea'
            });
            bootstrap.Modal.getInstance(document.getElementById('submitBookModal')).hide();
        }, 2000);
    }

    // View feedback
    function viewFeedback(bookId) {
        Swal.fire({
            title: 'Editor Feedback',
            html: `
                <div style="text-align: left;">
                    <h4>Feedback for "The Silent Witness"</h4>
                    <p><strong>Overall Rating:</strong> 4.2/5</p>
                    <p><strong>Comments:</strong></p>
                    <p>This is a compelling mystery with well-developed characters. The plot keeps readers engaged throughout. However, there are a few areas that need attention:</p>
                    <ul>
                        <li>Chapter 5 needs more tension in the climactic scene</li>
                        <li>Character motivations in Chapter 12 could be clearer</li>
                        <li>Some dialogue feels a bit forced</li>
                    </ul>
                    <p><strong>Suggestions:</strong></p>
                    <ul>
                        <li>Add more sensory details to enhance atmosphere</li>
                        <li>Consider adding a subplot to enrich the story</li>
                    </ul>
                </div>
            `,
            confirmButtonColor: '#667eea',
            width: '600px'
        });
    }

    // Submit revisions
    function submitRevisions(bookId) {
        Swal.fire({
            title: 'Submit Revisions?',
            text: 'Are you sure you want to submit your revisions for review?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#28a745',
            cancelButtonColor: '#6c757d',
            confirmButtonText: 'Yes, submit revisions!'
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire({
                    title: 'Revisions Submitted!',
                    text: 'Your revisions have been submitted for review.',
                    icon: 'success',
                    confirmButtonColor: '#667eea'
                });
            }
        });
    }

    // Request extension
    function requestExtension(bookId) {
        Swal.fire({
            title: 'Request Extension',
            html: `
                <textarea id="extensionReason" class="swal2-textarea" placeholder="Explain why you need more time..." style="width: 100%; height: 100px;"></textarea>
            `,
            confirmButtonText: 'Request Extension',
            confirmButtonColor: '#ffc107',
            focusConfirm: false,
            preConfirm: () => {
                const reason = document.getElementById('extensionReason').value;
                if (!reason) {
                    Swal.showValidationMessage('Please provide a reason for your extension request');
                }
                return reason;
            }
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire({
                    title: 'Extension Requested!',
                    text: 'Your extension request has been sent to the editor.',
                    icon: 'success',
                    confirmButtonColor: '#667eea'
                });
            }
        });
    }

    // View analytics
    function viewAnalytics(bookId) {
        Swal.fire({
            title: 'Book Analytics',
            html: `
                <div style="text-align: left;">
                    <h4>"The Dragon's Quest" Analytics</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px;">
                            <strong>Sales:</strong> 1,247 copies
                        </div>
                        <div style="background: rgba(40, 167, 69, 0.1); padding: 15px; border-radius: 8px;">
                            <strong>Earnings:</strong> $2,847.50
                        </div>
                        <div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 8px;">
                            <strong>Reviews:</strong> 4.8/5 (89 reviews)
                        </div>
                        <div style="background: rgba(0, 123, 255, 0.1); padding: 15px; border-radius: 8px;">
                            <strong>Downloads:</strong> 1,452
                        </div>
                    </div>
                    <p><strong>Top Platforms:</strong></p>
                    <ul>
                        <li>Amazon Kindle: 65% of sales</li>
                        <li>Apple Books: 25% of sales</li>
                        <li>Kobo: 10% of sales</li>
                    </ul>
                </div>
            `,
            confirmButtonColor: '#667eea',
            width: '600px'
        });
    }

    // Update book
    function updateBook(bookId) {
        Swal.fire({
            title: 'Update Book',
            text: 'What would you like to update?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#667eea',
            cancelButtonColor: '#6c757d',
            confirmButtonText: 'Update Content',
            cancelButtonText: 'Update Metadata',
            showDenyButton: true,
            denyButtonText: 'Cancel',
            denyButtonColor: '#6c757d'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = '@Url.Action("Editor", "Author")';
            } else if (result.isDismissed && result.dismiss === Swal.DismissReason.cancel) {
                Swal.fire({
                    title: 'Metadata Update',
                    text: 'Redirecting to metadata update page...',
                    icon: 'info',
                    confirmButtonColor: '#667eea'
                });
            }
        });
    }

    // Initialize AOS
    AOS.init({
        duration: 600,
        easing: 'ease-out',
        once: true
    });
</script>