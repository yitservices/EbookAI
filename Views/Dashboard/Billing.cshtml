@{
    ViewData["Title"] = "Billing - eBook Publisher";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<div class="billing-header">
    <h1>Billing Information</h1>
    <p>Manage your payment methods and view invoices</p>
</div>

<div class="billing-content">
    <div class="billing-grid">
        <!-- Billing Form -->
        <div class="billing-section">
            <h2><i class="fas fa-credit-card"></i> Payment Information</h2>
            <form class="billing-form">
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" placeholder="John Doe" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="john@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="address">Billing Address</label>
                    <input type="text" id="address" name="address" placeholder="123 Main St" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" name="city" placeholder="New York" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="zipCode">ZIP Code</label>
                        <input type="text" id="zipCode" name="zipCode" placeholder="10001" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="cardNumber">Card Number</label>
                    <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="expiryDate">Expiry Date</label>
                        <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" placeholder="123" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">Save Payment Method</button>
            </form>
        </div>
        
        <!-- Cart Summary -->
        <div class="billing-section">
            <h2><i class="fas fa-shopping-cart"></i> Cart Summary</h2>
            <div class="cart-summary">
                <div class="cart-item">
                    <div class="item-info">
                        <div class="item-name">EBook Creation</div>
                        <div class="item-type">Basic</div>
                    </div>
                    <div class="item-price">$0.00</div>
                </div>
                
                <div class="cart-item">
                    <div class="item-info">
                        <div class="item-name">Cover Design</div>
                        <div class="item-type">Premium</div>
                    </div>
                    <div class="item-price">$19.99</div>
                </div>
                
                <div class="cart-item">
                    <div class="item-info">
                        <div class="item-name">Advanced Analytics</div>
                        <div class="item-type">Premium</div>
                    </div>
                    <div class="item-price">$14.99</div>
                </div>
                
                <div class="cart-total">
                    <span>Total:</span>
                    <span>$34.98</span>
                </div>
                
                <button class="btn btn-primary" id="addToCartBtn">
                    <i class="fas fa-plus"></i> Add to Cart
                </button>
            </div>
            
            <!-- Invoice Table -->
            <h2><i class="fas fa-file-invoice"></i> Invoice History</h2>
            <div class="invoice-table">
                <div class="table-header">
                    <div class="table-cell">Invoice #</div>
                    <div class="table-cell">Date</div>
                    <div class="table-cell">Amount</div>
                    <div class="table-cell">Status</div>
                    <div class="table-cell">Actions</div>
                </div>
                <div class="table-row">
                    <div class="table-cell">#INV-001</div>
                    <div class="table-cell">2023-05-15</div>
                    <div class="table-cell">$29.99</div>
                    <div class="table-cell status-paid">Paid</div>
                    <div class="table-cell">
                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                        <button class="btn-icon" title="Print"><i class="fas fa-print"></i></button>
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell">#INV-002</div>
                    <div class="table-cell">2023-06-15</div>
                    <div class="table-cell">$29.99</div>
                    <div class="table-cell status-paid">Paid</div>
                    <div class="table-cell">
                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                        <button class="btn-icon" title="Print"><i class="fas fa-print"></i></button>
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell">#INV-003</div>
                    <div class="table-cell">2023-07-15</div>
                    <div class="table-cell">$29.99</div>
                    <div class="table-cell status-pending">Pending</div>
                    <div class="table-cell">
                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                        <button class="btn-icon" title="Print"><i class="fas fa-print"></i></button>
                    </div>
                </div>
            </div>
            
            <div class="invoice-actions">
                <button class="btn btn-secondary" id="downloadInvoiceBtn">
                    <i class="fas fa-download"></i> Download Invoice
                </button>
                <button class="btn btn-secondary" id="printInvoiceBtn">
                    <i class="fas fa-print"></i> Print Invoice
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const billingForm = document.querySelector('.billing-form');
            const addToCartBtn = document.getElementById('addToCartBtn');
            const downloadInvoiceBtn = document.getElementById('downloadInvoiceBtn');
            const printInvoiceBtn = document.getElementById('printInvoiceBtn');
            
            billingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                Swal.fire({
                    title: 'Payment Method Saved!',
                    text: 'Your payment information has been saved successfully.',
                    icon: 'success',
                    timer: 2000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
            });
            
            addToCartBtn.addEventListener('click', function() {
                Swal.fire({
                    title: 'Add to Cart',
                    text: 'Select additional features to add to your cart.',
                    icon: 'info',
                    confirmButtonColor: '#4a6cf7',
                    confirmButtonText: 'Continue'
                }).then(() => {
                    window.location.href = '/Dashboard/FeaturesSelection';
                });
            });
            
            downloadInvoiceBtn.addEventListener('click', function() {
                Swal.fire({
                    title: 'Download Invoice',
                    text: 'Your invoice will be downloaded shortly.',
                    icon: 'success',
                    timer: 2000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
            });
            
            printInvoiceBtn.addEventListener('click', function() {
                Swal.fire({
                    title: 'Print Invoice',
                    text: 'Printing invoice...',
                    icon: 'info',
                    timer: 2000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
            });
            
            // Add event listeners to download and print buttons in the table
            document.querySelectorAll('.btn-icon[title="Download"]').forEach(button => {
                button.addEventListener('click', function() {
                    Swal.fire({
                        title: 'Download Invoice',
                        text: 'Invoice downloaded successfully.',
                        icon: 'success',
                        timer: 1500,
                        timerProgressBar: true,
                        showConfirmButton: false
                    });
                });
            });
            
            document.querySelectorAll('.btn-icon[title="Print"]').forEach(button => {
                button.addEventListener('click', function() {
                    Swal.fire({
                        title: 'Print Invoice',
                        text: 'Printing invoice...',
                        icon: 'info',
                        timer: 1500,
                        timerProgressBar: true,
                        showConfirmButton: false
                    });
                });
            });
        });
    </script>
}