@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Analytics Dashboard";
}

<style>
    /* Outstanding Analytics Dashboard Styles */
    .analytics-container {
        animation: fadeIn 0.8s ease-out;
        padding: 20px;
    }

    @@keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Stats Cards with Outstanding Design */
    .stats-row {
        margin-bottom: 35px;
    }

    .stat-card {
        background: linear-gradient(145deg, #ffffff, #f8f9fa);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        border: none;
        height: 100%;
        animation: floatIn 0.6s ease-out;
        animation-fill-mode: both;
    }

    .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.5s ease;
    }

    .stat-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    .stat-card:hover::before {
        transform: scaleX(1);
    }

    .stat-icon {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 1.8rem;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        animation: pulseIcon 3s infinite;
    }

    @@keyframes pulseIcon {
        0% { transform: scale(1); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }
        50% { transform: scale(1.1); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); }
        100% { transform: scale(1); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }
    }

    .stat-card:hover .stat-icon {
        transform: scale(1.2) rotate(10deg);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .stat-value {
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        transition: all 0.3s ease;
    }

    .stat-card:hover .stat-value {
        transform: scale(1.1);
    }

    .stat-label {
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
    }

    /* Chart Cards with Outstanding Design */
    .chart-card {
        background: linear-gradient(145deg, #ffffff, #f8f9fa);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        border: none;
        margin-bottom: 30px;
        transition: all 0.4s ease;
        animation: fadeIn 0.8s ease-out;
    }

    .chart-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }

    .card-header {
        background: linear-gradient(90deg, #667eea, #764ba2);
        color: white;
        padding: 25px;
        border: none;
    }

    .card-header h4 {
        margin: 0;
        font-weight: 700;
        font-size: 1.5rem;
    }

    .card-body {
        padding: 30px;
    }

    .chart-container {
        position: relative;
        height: 350px;
    }

    /* Table with Outstanding Design */
    .table-responsive {
        border-radius: 15px;
        overflow: hidden;
    }

    .table {
        margin-bottom: 0;
    }

    .table thead th {
        background: linear-gradient(90deg, #667eea, #764ba2);
        color: white;
        border: none;
        font-weight: 600;
        padding: 20px 15px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.9rem;
    }

    .table tbody td {
        padding: 20px 15px;
        vertical-align: middle;
        border-bottom: 1px solid #e9ecef;
        transition: all 0.3s ease;
    }

    .table tbody tr {
        transition: all 0.3s ease;
    }

    .table tbody tr:hover {
        background-color: rgba(102, 126, 234, 0.05);
        transform: scale(1.01);
    }

    .badge {
        padding: 8px 16px;
        border-radius: 25px;
        font-size: 0.85rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    }

    .badge:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
    }

    .badge.bg-primary {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9)) !important;
    }

    .badge.bg-success {
        background: linear-gradient(135deg, rgba(76, 175, 80, 0.9), rgba(56, 142, 60, 0.9)) !important;
    }

    .badge.bg-warning {
        background: linear-gradient(135deg, rgba(255, 152, 0, 0.9), rgba(230, 126, 34, 0.9)) !important;
    }

    .badge.bg-info {
        background: linear-gradient(135deg, rgba(52, 152, 219, 0.9), rgba(41, 128, 185, 0.9)) !important;
    }

    .badge.bg-secondary {
        background: linear-gradient(135deg, rgba(149, 165, 166, 0.9), rgba(127, 140, 141, 0.9)) !important;
    }

    .btn-outline-primary {
        padding: 10px 20px;
        border: 2px solid #667eea;
        border-radius: 15px;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        display: inline-flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
    }

    .btn-outline-primary:hover {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-color: #667eea;
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    /* Animations */
    @@keyframes floatIn {
        from { opacity: 0; transform: translateY(30px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* Responsive Design */
    @@media (max-width: 768px) {
        .analytics-container {
            padding: 15px;
        }

        .stat-value {
            font-size: 2rem;
        }

        .chart-container {
            height: 300px;
        }

        .card-header {
            padding: 20px;
        }

        .card-header h4 {
            font-size: 1.3rem;
        }

        .card-body {
            padding: 20px;
        }

        .table-responsive {
            font-size: 0.9rem;
        }
    }

    @@media (max-width: 576px) {
        .analytics-container {
            padding: 10px;
        }

        .stat-value {
            font-size: 1.8rem;
        }

        .chart-container {
            height: 250px;
        }

        .card-header {
            padding: 15px;
            text-align: center;
        }

        .card-header h4 {
            font-size: 1.2rem;
        }

        .card-body {
            padding: 15px;
        }

        .table-responsive {
            font-size: 0.85rem;
        }

        .btn-outline-primary {
            width: 100%;
            justify-content: center;
        }
    }
</style>

<div class="analytics-container">
    <!-- Stats Cards -->
    <div class="row stats-row">
        <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
            <div class="stat-card">
                <div class="card-body text-center">
                    <div class="stat-icon bg-primary text-white">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value">1,242</div>
                    <div class="stat-label">Total Users</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
            <div class="stat-card">
                <div class="card-body text-center">
                    <div class="stat-icon bg-success text-white">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-value">892</div>
                    <div class="stat-label">Active Users</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
            <div class="stat-card">
                <div class="card-body text-center">
                    <div class="stat-icon bg-info text-white">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-value">$24,560</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
            <div class="stat-card">
                <div class="card-body text-center">
                    <div class="stat-icon bg-warning text-white">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="stat-value">142</div>
                    <div class="stat-label">New Users (30 days)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="row">
        <div class="col-lg-8 mb-4" data-aos="fade-right" data-aos-delay="100">
            <div class="chart-card">
                <div class="card-header">
                    <h4><i class="fas fa-chart-line me-3"></i> User Growth Analytics</h4>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="userChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 mb-4" data-aos="fade-left" data-aos-delay="200">
            <div class="chart-card">
                <div class="card-header">
                    <h4><i class="fas fa-chart-pie me-3"></i> Traffic Sources</h4>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="trafficChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Revenue and Performance -->
    <div class="row">
        <div class="col-lg-6 mb-4" data-aos="fade-up" data-aos-delay="100">
            <div class="chart-card">
                <div class="card-header">
                    <h4><i class="fas fa-dollar-sign me-3"></i> Revenue Statistics</h4>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 mb-4" data-aos="fade-up" data-aos-delay="200">
            <div class="chart-card">
                <div class="card-header">
                    <h4><i class="fas fa-tachometer-alt me-3"></i> Platform Performance</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Platform</th>
                                    <th>Books</th>
                                    <th>Authors</th>
                                    <th>Readers</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><i class="fab fa-amazon me-2 text-primary"></i> Amazon</td>
                                    <td>1,242</td>
                                    <td>892</td>
                                    <td>12,456</td>
                                    <td><span class="badge bg-success"><i class="fas fa-check-circle me-1"></i>Active</span></td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-book me-2 text-info"></i> Apple Books</td>
                                    <td>876</td>
                                    <td>654</td>
                                    <td>8,765</td>
                                    <td><span class="badge bg-success"><i class="fas fa-check-circle me-1"></i>Active</span></td>
                                </tr>
                                <tr>
                                    <td><i class="fab fa-google-play me-2 text-success"></i> Google Play</td>
                                    <td>754</td>
                                    <td>543</td>
                                    <td>7,654</td>
                                    <td><span class="badge bg-warning"><i class="fas fa-exclamation-circle me-1"></i>Limited</span></td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-book-open me-2 text-secondary"></i> Kobo</td>
                                    <td>432</td>
                                    <td>321</td>
                                    <td>4,321</td>
                                    <td><span class="badge bg-primary"><i class="fas fa-plus-circle me-1"></i>New</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Sales Analytics -->
    <div class="row" data-aos="fade-up" data-aos-delay="100">
        <div class="col-12">
            <div class="chart-card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0"><i class="fas fa-book me-3"></i> Book Sales Analytics</h4>
                    <button class="btn btn-outline-primary">
                        <i class="fas fa-list me-2"></i>View All
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Book Title</th>
                                    <th>Author</th>
                                    <th>Category</th>
                                    <th>Sales</th>
                                    <th>Revenue</th>
                                    <th>Rating</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="fw-bold">The Silent Echo</td>
                                    <td>John Smith</td>
                                    <td><span class="badge bg-primary"><i class="fas fa-book me-1"></i>Mystery</span></td>
                                    <td>242</td>
                                    <td class="text-success fw-bold">$2,420</td>
                                    <td><i class="fas fa-star text-warning"></i> 4.8</td>
                                    <td><span class="badge bg-success"><i class="fas fa-fire me-1"></i>Bestseller</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">Digital Dreams</td>
                                    <td>Sarah Johnson</td>
                                    <td><span class="badge bg-info"><i class="fas fa-rocket me-1"></i>Sci-Fi</span></td>
                                    <td>187</td>
                                    <td class="text-success fw-bold">$1,870</td>
                                    <td><i class="fas fa-star text-warning"></i> 4.6</td>
                                    <td><span class="badge bg-success"><i class="fas fa-fire me-1"></i>Bestseller</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">Cooking with Love</td>
                                    <td>Michael Brown</td>
                                    <td><span class="badge bg-warning"><i class="fas fa-utensils me-1"></i>Cooking</span></td>
                                    <td>156</td>
                                    <td class="text-success fw-bold">$1,560</td>
                                    <td><i class="fas fa-star text-warning"></i> 4.9</td>
                                    <td><span class="badge bg-primary"><i class="fas fa-chart-line me-1"></i>Trending</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">History Unveiled</td>
                                    <td>Emily Davis</td>
                                    <td><span class="badge bg-secondary"><i class="fas fa-landmark me-1"></i>History</span></td>
                                    <td>134</td>
                                    <td class="text-success fw-bold">$1,340</td>
                                    <td><i class="fas fa-star text-warning"></i> 4.7</td>
                                    <td><span class="badge bg-primary"><i class="fas fa-chart-line me-1"></i>Trending</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">Art of Photography</td>
                                    <td>David Wilson</td>
                                    <td><span class="badge bg-success"><i class="fas fa-camera me-1"></i>Photography</span></td>
                                    <td>98</td>
                                    <td class="text-success fw-bold">$980</td>
                                    <td><i class="fas fa-star text-warning"></i> 4.5</td>
                                    <td><span class="badge bg-warning"><i class="fas fa-circle me-1"></i>Regular</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add entrance animations
            const elements = document.querySelectorAll('.stat-card, .chart-card');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, 100 * index);
            });

            // User Chart
            const userCtx = document.getElementById('userChart').getContext('2d');
            const userChart = new Chart(userCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'New Users',
                        data: [120, 190, 150, 220, 180, 250, 210, 300, 280, 350, 320, 400],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#667eea',
                        pointBorderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'Returning Users',
                        data: [80, 120, 100, 140, 130, 170, 150, 200, 190, 240, 220, 280],
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#4ecdc4',
                        pointBorderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false,
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Revenue ($)',
                        data: [3200, 4100, 3800, 5200, 4500, 6100, 5800, 7200, 6800, 8100, 7900, 9200],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.7)',
                            'rgba(102, 126, 234, 0.9)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(102, 126, 234, 1)'
                        ],
                        borderWidth: 1,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false,
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                },
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Traffic Chart
            const trafficCtx = document.getElementById('trafficChart').getContext('2d');
            const trafficChart = new Chart(trafficCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Direct', 'Social Media', 'Search Engines', 'Referrals', 'Other'],
                    datasets: [{
                        data: [45, 25, 15, 10, 5],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(78, 205, 196, 0.8)',
                            'rgba(52, 152, 219, 0.8)',
                            'rgba(241, 196, 15, 0.8)',
                            'rgba(155, 89, 182, 0.8)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(78, 205, 196, 1)',
                            'rgba(52, 152, 219, 1)',
                            'rgba(241, 196, 15, 1)',
                            'rgba(155, 89, 182, 1)'
                        ],
                        borderWidth: 2,
                        borderRadius: 5,
                        spacing: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    },
                    cutout: '70%',
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        });
    </script>
}